<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="comember">
	<resultMap id="comemberResult01" type="java.util.Map">
		<result property="c_Id" column="c_Id"  />
		<result property="mem_Id" column="mem_Id" />
		<result property="grade" column="grade" />
		<result property="c_Name" column="c_Name" />
	</resultMap>

	<select id="searchList" resultMap="comemberResult01" parameterType="java.util.Map"> 
      <![CDATA[
         select c_Id, mem_Id, grade, c_Name
			from(select m.c_Id, m.mem_Id, m.grade, w.c_Name
       		  from co_member m, co_work w
         		 where m.c_Id = w.c_Id
         )
      ]]>
		<where>
			<if test=" mem_Id != ''  and  mem_Id != null">
				mem_Id = #{mem_Id}
			</if>
		</where>
		order by to_number(c_Id) asc
	</select>
	
	
	<insert id="insertComember" parameterType="java.util.Map">
		insert into co_member(c_Id, mem_Id, grade) 
		values(#{c_Id}, #{mem_Id}, '02')
	</insert>	
	
	
	<delete id="deleteComember" parameterType="java.util.Map">
	  	delete from co_member
	  <where>
	   <choose>
	   		<when test ="c_Id != '' and c_Id != null and mem_Id != ''  and  mem_Id != null">
	   		c_Id = #{c_Id} and mem_Id = ${mem_Id}
	   		</when>
	   		<when test ="c_Id != '' and c_Id != null">
	   		c_Id = #{c_Id}
	   		</when>
	   		<when test="mem_Id != ''  and  mem_Id != null">
	   		mem_Id = #{mem_Id}
	   		</when>
	   </choose>
	  </where>
	</delete>
	
	<delete id="deleteComemberAll" parameterType="java.util.Map">
	  	delete from co_member where c_Id =#{c_Id}
	</delete>
	
</mapper>